# Charge Setup 스마트폰 연동 가능성 보고서

**작성일:** 2025년 12월 22일
**프로젝트:** 시스템 시간/근무시간 설정 스마트폰 앱 전환

---

## 1. 현재 상황 분석

### 현재 시스템
| 항목 | 내용 |
|------|------|
| 통신 방식 | UART (115200bps) |
| 설정 장비 | PC |
| 전송 데이터 | 현재 시간, 근무시간 |

### 문제점
- PC 연결이 필요하여 설정 작업이 번거로움
- 현장에서 PC를 가져가야 하는 부담

### 목표
- **PC 대신 스마트폰으로 시스템 설정**
- Android + iOS 모두 지원

---

## 2. 요구사항 분석 및 해결방안

### 2.1 스마트폰-시스템 통신 모듈 (권장)

| 모듈 | 프로토콜 | 가격 | Android | iOS | 권장도 |
|------|----------|------|---------|-----|--------|
| **HC-05** | Bluetooth Classic SPP | $3~5 | ✅ | ❌ | Android만 |
| **HC-06** | Bluetooth Classic SPP | $3~5 | ✅ | ❌ | Android만 |
| **HM-10** | BLE (Bluetooth 4.0) | $5~8 | ✅ | ✅ | ⭐⭐⭐ 추천 |
| **ESP32** | BLE + WiFi | $5~10 | ✅ | ✅ | ⭐⭐⭐ 추천 |
| **nRF52832** | BLE | $8~15 | ✅ | ✅ | 고성능 필요시 |

#### 권장: **HM-10 (BLE 모듈)**
- **이유:**
  1. Android + iOS 모두 지원 (BLE)
  2. 저렴한 가격 ($5~8)
  3. 기존 UART 인터페이스와 쉽게 연동 (TX/RX 연결만 하면 됨)
  4. 저전력
  5. 충분한 레퍼런스와 예제 코드 존재

#### 하드웨어 연결 (HM-10 기준)
```
[기존 시스템 MCU]          [HM-10 모듈]
      TX  ──────────────→  RX
      RX  ←──────────────  TX
     VCC  ──────────────→  VCC (3.3V)
     GND  ──────────────→  GND
```

---

### 2.2 앱 개발 플랫폼 (권장)

| 플랫폼 | 언어 | Android | iOS | 난이도 | 권장 상황 |
|--------|------|---------|-----|--------|----------|
| **Flutter** | Dart | ✅ | ✅ | 중 | ⭐⭐⭐ 상용 앱 |
| **React Native** | JavaScript | ✅ | ✅ | 중 | 웹 개발 경험시 |
| **MIT App Inventor** | 블록코딩 | ✅ | ✅ | 쉬움 | ⭐⭐⭐ 빠른 프로토타입 |
| Android Studio | Kotlin | ✅ | ❌ | 어려움 | Android만 필요시 |

#### 권장 조합

**옵션 A: 빠른 개발 (프로토타입/소량 생산)**
- 플랫폼: **MIT App Inventor**
- 장점: 코딩 없이 블록 조립, 1~2일 내 완성 가능
- 단점: 디자인 제한, 앱스토어 배포 번거로움

**옵션 B: 상용 앱 (대량 생산/브랜드)**
- 플랫폼: **Flutter + flutter_blue_plus**
- 장점: 전문적인 UI, 앱스토어 배포 용이
- 단점: 개발 기간 1~2주 필요

---

### 2.3 앱 기능 구성

```
┌─────────────────────────────────────┐
│         Charge Setup App            │
├─────────────────────────────────────┤
│  ┌─────────────────────────────┐    │
│  │   🔵 Bluetooth 연결 상태    │    │
│  │   [연결됨 / 연결 안됨]      │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │   📅 현재 시간 설정         │    │
│  │   [스마트폰 시간 자동 동기화]│    │
│  │   2025-12-22 14:30:00       │    │
│  │   [ 시간 전송 ]             │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │   🕐 근무시간 설정          │    │
│  │   시작: [09:00] 종료: [18:00]│    │
│  │   [ 근무시간 전송 ]         │    │
│  └─────────────────────────────┘    │
│                                     │
│  [ 🔄 전체 설정 전송 ]              │
└─────────────────────────────────────┘
```

---

## 3. Claude 지원 가능 범위

### 3.1 가능한 작업 ✅

| 항목 | 설명 | 지원 |
|------|------|------|
| **HM-10 펌웨어 코드** | MCU에서 HM-10과 UART 통신하는 코드 | ✅ |
| **통신 프로토콜 설계** | 시간/근무시간 데이터 패킷 형식 정의 | ✅ |
| **Flutter 앱 코드** | BLE 연결 + 데이터 전송 앱 전체 | ✅ |
| **MIT App Inventor 가이드** | 블록 구성 방법 상세 안내 | ✅ |
| **테스트 시나리오** | 연결 테스트, 데이터 전송 테스트 | ✅ |

### 3.2 사용자 필요 작업

| 항목 | 설명 |
|------|------|
| HM-10 모듈 구매 | 알리익스프레스/디바이스마트 등 |
| 하드웨어 연결 | HM-10 ↔ 기존 MCU 배선 |
| 앱 빌드/배포 | Flutter: Android Studio 설치 필요 |
| 앱스토어 등록 | 필요시 개발자 계정 등록 (유료) |

---

## 4. 개발 일정 (예상)

### 옵션 A: MIT App Inventor (빠른 개발)
| 단계 | 작업 | 예상 소요 |
|------|------|----------|
| 1 | HM-10 모듈 연결 및 AT 명령 테스트 | 반나절 |
| 2 | 기존 MCU 코드 수정 (HM-10 연동) | 반나절 |
| 3 | App Inventor 앱 제작 | 1일 |
| 4 | 통합 테스트 | 반나절 |
| **합계** | | **2~3일** |

### 옵션 B: Flutter (상용 앱)
| 단계 | 작업 | 예상 소요 |
|------|------|----------|
| 1 | HM-10 모듈 연결 및 테스트 | 반나절 |
| 2 | MCU 코드 수정 | 반나절 |
| 3 | Flutter 개발환경 구축 | 반나절 |
| 4 | 앱 UI 개발 | 2~3일 |
| 5 | BLE 통신 구현 | 1~2일 |
| 6 | 통합 테스트 및 디버깅 | 1일 |
| **합계** | | **5~7일** |

---

## 5. 결론 및 권장사항

### 개발 가능성: ✅ **충분히 가능**

### 권장 구성
| 항목 | 권장 선택 |
|------|----------|
| **통신 모듈** | HM-10 (BLE) |
| **앱 플랫폼** | MIT App Inventor (프로토타입) → Flutter (상용) |
| **통신 프로토콜** | 115200bps UART (기존 유지) |

### 다음 단계

1. **HM-10 모듈 구매** (1~2개 테스트용)
2. **통신 프로토콜 확정** (시간/근무시간 데이터 형식)
3. **Claude에게 요청:**
   - MCU용 HM-10 통신 코드
   - MIT App Inventor 앱 구성 가이드
   - (또는) Flutter 앱 전체 코드

---

## 6. 부록: 통신 프로토콜 예시 (안)

### 데이터 패킷 형식
```
[STX][CMD][DATA][ETX][CHK]

STX: 0x02 (시작)
ETX: 0x03 (종료)
CHK: XOR 체크섬

CMD 정의:
  0x01 - 현재 시간 설정
  0x02 - 근무시간 설정
  0x03 - 전체 설정
  0x10 - ACK (응답)
```

### 예시: 현재 시간 전송
```
시간: 2025-12-22 14:30:00
패킷: [0x02][0x01][25][12][22][14][30][00][0x03][CHK]
응답: [0x02][0x10][OK][0x03][CHK]
```

### 예시: 근무시간 전송
```
근무시간: 09:00 ~ 18:00
패킷: [0x02][0x02][09][00][18][00][0x03][CHK]
응답: [0x02][0x10][OK][0x03][CHK]
```

---

**문의사항이나 추가 개발 요청이 있으시면 Claude에게 말씀해 주세요.**
