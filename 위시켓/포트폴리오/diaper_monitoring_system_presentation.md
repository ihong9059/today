# Smart Diaper Monitoring System
## BLE Mesh 기반 스마트 기저귀 모니터링 시스템

---

## 1. 프로젝트 개요

### 1.1 프로젝트 명
**BLE Mesh 기반 스마트 기저귀 습도 모니터링 시스템**

### 1.2 프로젝트 목적
병원, 요양원, 가정에서 환자의 기저귀 상태를 실시간으로 모니터링하여 적시에 교체할 수 있도록 지원하는 IoT 헬스케어 솔루션

### 1.3 핵심 가치
- **환자 건강 보호**: 피부 질환 및 욕창 예방
- **간병 효율 향상**: 불필요한 확인 작업 감소
- **데이터 기반 관리**: 체계적인 케어 기록 관리

---

## 2. 문제 정의

### 2.1 현재 상황의 문제점

| 문제 | 설명 |
|------|------|
| **건강 위험** | 장시간 습한 기저귀 착용 시 피부염, 욕창 발생 위험 |
| **비효율적 확인** | 주기적인 수동 확인으로 인한 간병인 업무 부담 |
| **환자 불편** | 불필요한 신체 접촉으로 인한 환자 수면 방해 |
| **기록 부재** | 교체 이력 관리의 어려움 |

### 2.2 대상 사용자
- 병원 및 요양원의 간호/간병 인력
- 재가 환자 보호자
- 영유아 보육 시설

---

## 3. 솔루션 소개

### 3.1 시스템 개요

```
스마트 기저귀 모니터링 시스템은 BLE Mesh 네트워크를 활용하여
다수의 환자 기저귀 상태를 실시간으로 모니터링하고,
데이터를 수집/분석하여 효율적인 케어를 지원합니다.
```

### 3.2 핵심 기능

1. **실시간 습도 감지** - 기저귀 내 습도 변화 즉시 감지
2. **다중 환자 모니터링** - BLE Mesh로 다수 센서 동시 관리
3. **알림 시스템** - 교체 필요 시 즉각적인 알림 발송
4. **이력 관리** - 모든 교체 기록 데이터베이스 저장
5. **통계 분석** - 환자별 패턴 분석 및 리포트 제공

---

## 4. 시스템 아키텍처

### 4.1 전체 구성도

```
┌─────────────────────────────────────────────────────────────────┐
│                        시스템 아키텍처                            │
└─────────────────────────────────────────────────────────────────┘

    [센서 레이어]              [게이트웨이]            [서비스 레이어]

 ┌──────────────┐                                  ┌──────────────┐
 │   센서 #1    │                                  │              │
 │  (nRF52832)  │ ─┐                               │   Web UI     │
 │  습도 센서    │  │                               │  Dashboard   │
 └──────────────┘  │                               │              │
                   │      ┌──────────────┐         └──────┬───────┘
 ┌──────────────┐  │      │              │                │
 │   센서 #2    │  │ BLE  │  Raspberry   │    WiFi/       │
 │  (nRF52832)  │ ─┼─────▶│     Pi       │◀──Ethernet ────┤
 │  습도 센서    │  │ Mesh │  (BLE Sink)  │                │
 └──────────────┘  │      │              │         ┌──────┴───────┐
                   │      └──────┬───────┘         │              │
 ┌──────────────┐  │             │                 │   Database   │
 │   센서 #N    │  │             │                 │   (SQLite/   │
 │  (nRF52832)  │ ─┘             └────────────────▶│   MariaDB)   │
 │  습도 센서    │                                  │              │
 └──────────────┘                                  └──────────────┘
```

### 4.2 데이터 흐름

```
[습도 감지] → [BLE 전송] → [데이터 수집] → [DB 저장] → [대시보드 표시]
    │             │             │             │              │
    ▼             ▼             ▼             ▼              ▼
  센서        BLE Mesh     Raspberry Pi    Database      Web UI
```

---

## 5. 하드웨어 구성

### 5.1 센서 노드 (Sensor Node)

| 구성요소 | 사양 | 역할 |
|----------|------|------|
| **MCU** | nRF52832 | BLE Mesh 통신 및 센서 제어 |
| **습도 센서** | 저항형/정전용량형 | 기저귀 내 습도 측정 |
| **전원** | 코인 배터리 (CR2032) | 저전력 장기 구동 |
| **케이스** | 방수 소형 케이스 | 기저귀 부착용 |

#### 센서 노드 특징
- **저전력 설계**: 수개월 배터리 수명
- **소형 경량**: 환자 불편 최소화
- **방수 처리**: 습기 환경 내구성

### 5.2 게이트웨이 (Gateway)

| 구성요소 | 사양 | 역할 |
|----------|------|------|
| **메인보드** | Raspberry Pi 4 | 데이터 처리 및 서버 운영 |
| **BLE 모듈** | nRF52832 USB Dongle | BLE Mesh Sink |
| **저장장치** | SD Card (32GB+) | OS 및 데이터 저장 |
| **네트워크** | WiFi / Ethernet | 외부 네트워크 연결 |

---

## 6. 소프트웨어 구성

### 6.1 펌웨어 (nRF52832)

```c
// 주요 기능
- BLE Mesh 프로토콜 스택
- 습도 센서 데이터 수집
- 저전력 모드 관리
- 주기적 데이터 전송
```

**개발 환경**
- nRF5 SDK for Mesh
- Segger Embedded Studio
- Nordic nRF Connect

### 6.2 게이트웨이 소프트웨어 (Raspberry Pi)

| 모듈 | 기술 스택 | 기능 |
|------|-----------|------|
| **BLE 수신** | Python + bluepy | Mesh 데이터 수신 |
| **데이터 처리** | Python | 파싱 및 가공 |
| **데이터베이스** | SQLite / MariaDB | 데이터 저장 |
| **웹 서버** | Flask / Node.js | API 및 UI 제공 |
| **알림 서비스** | MQTT / Push | 실시간 알림 |

### 6.3 웹 대시보드

```
┌─────────────────────────────────────────────────────────────┐
│  Smart Diaper Monitoring Dashboard                      [=] │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │
│  │  환자 #1    │  │  환자 #2    │  │  환자 #3    │   ...   │
│  │  ━━━━━━━━   │  │  ━━━━━━━━   │  │  ━━━━━━━━   │         │
│  │  습도: 45%  │  │  습도: 78%  │  │  습도: 32%  │         │
│  │  ✓ 정상    │  │  ⚠ 교체필요  │  │  ✓ 정상    │         │
│  └─────────────┘  └─────────────┘  └─────────────┘         │
│                                                             │
│  [실시간 모니터링]  [이력 조회]  [통계 분석]  [설정]         │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**주요 화면**
1. **실시간 모니터링**: 전체 환자 현재 상태 한눈에 확인
2. **상세 정보**: 개별 환자 상세 정보 및 그래프
3. **이력 조회**: 날짜별/환자별 교체 기록 검색
4. **통계 리포트**: 일별/주별/월별 통계 분석
5. **시스템 설정**: 알림 임계값, 사용자 관리

---

## 7. 주요 기능 상세

### 7.1 실시간 모니터링

```
┌─────────────────────────────────────┐
│ 환자: 홍길동 (Room 301-A)           │
├─────────────────────────────────────┤
│                                     │
│  현재 습도: ████████░░ 78%          │
│                                     │
│  상태: ⚠️ 교체 필요                  │
│                                     │
│  마지막 교체: 2시간 32분 전          │
│  센서 배터리: 85%                    │
│                                     │
│  [교체 완료] [상세 보기] [알림 설정]  │
└─────────────────────────────────────┘
```

### 7.2 알림 시스템

| 알림 유형 | 조건 | 알림 방법 |
|-----------|------|-----------|
| **교체 필요** | 습도 70% 이상 | 화면 표시 + 소리 + 푸시 |
| **장시간 미교체** | 4시간 경과 | 화면 표시 + 푸시 |
| **센서 이상** | 통신 두절 | 화면 표시 |
| **배터리 부족** | 20% 이하 | 화면 표시 |

### 7.3 이력 관리

```sql
-- 데이터베이스 구조 예시
CREATE TABLE diaper_records (
    id          INTEGER PRIMARY KEY,
    patient_id  INTEGER,
    sensor_id   VARCHAR(20),
    humidity    FLOAT,
    status      VARCHAR(20),
    changed_at  DATETIME,
    changed_by  VARCHAR(50),
    created_at  DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

**조회 가능 정보**
- 환자별 교체 이력
- 일별/주별/월별 교체 횟수
- 평균 교체 주기
- 담당자별 처리 현황

### 7.4 통계 및 리포트

```
┌─────────────────────────────────────────────┐
│  월간 리포트 - 2024년 1월                    │
├─────────────────────────────────────────────┤
│                                             │
│  총 교체 횟수: 1,247회                       │
│  평균 교체 주기: 3.2시간                     │
│  알림 대비 처리율: 94.5%                     │
│                                             │
│  ▓▓▓▓▓▓▓▓▓░  환자 만족도 향상               │
│  ▓▓▓▓▓▓▓▓░░  피부 질환 발생률 감소          │
│  ▓▓▓▓▓▓▓▓▓▓  간병 효율 향상                 │
│                                             │
└─────────────────────────────────────────────┘
```

---

## 8. BLE Mesh 네트워크

### 8.1 BLE Mesh 선택 이유

| 특성 | 설명 | 장점 |
|------|------|------|
| **다대다 통신** | 여러 노드 간 통신 | 다수 환자 동시 모니터링 |
| **메시 토폴로지** | 노드 간 릴레이 | 넓은 범위 커버리지 |
| **저전력** | BLE 기반 | 긴 배터리 수명 |
| **확장성** | 최대 32,767 노드 | 대규모 시설 적용 가능 |

### 8.2 네트워크 구성

```
        ┌─────┐
        │Sink │ (Raspberry Pi)
        └──┬──┘
           │
    ┌──────┼──────┐
    │      │      │
 ┌──┴──┐┌──┴──┐┌──┴──┐
 │Node1││Node2││Node3│  ← Relay 가능
 └──┬──┘└──┬──┘└──┬──┘
    │      │      │
 ┌──┴──┐┌──┴──┐┌──┴──┐
 │Node4││Node5││Node6│  ← 센서 노드
 └─────┘└─────┘└─────┘
```

---

## 9. 기대 효과

### 9.1 정량적 효과

| 항목 | 기존 | 도입 후 | 개선율 |
|------|------|---------|--------|
| 불필요한 확인 횟수 | 12회/일 | 2회/일 | **83% 감소** |
| 피부 질환 발생률 | 15% | 5% | **67% 감소** |
| 평균 대응 시간 | 45분 | 10분 | **78% 단축** |
| 간병인 업무 부담 | 높음 | 낮음 | **상당 개선** |

### 9.2 정성적 효과

- **환자 삶의 질 향상**: 적시 케어로 쾌적함 유지
- **간병인 업무 효율화**: 데이터 기반 효율적 업무 수행
- **의료기관 서비스 품질**: 체계적 케어 기록 관리
- **보호자 안심**: 원격 모니터링으로 환자 상태 확인

---

## 10. 시스템 사양 요약

### 10.1 센서 노드 사양

| 항목 | 사양 |
|------|------|
| MCU | Nordic nRF52832 |
| 통신 | BLE 5.0 Mesh |
| 전원 | CR2032 (3V) |
| 배터리 수명 | 6개월 이상 |
| 크기 | 30 x 20 x 10 mm |
| 무게 | 10g 이하 |
| 측정 범위 | 습도 0~100% |
| 측정 주기 | 설정 가능 (기본 30초) |

### 10.2 게이트웨이 사양

| 항목 | 사양 |
|------|------|
| 하드웨어 | Raspberry Pi 4 (4GB) |
| OS | Raspberry Pi OS |
| 저장 용량 | 32GB SD Card |
| 네트워크 | WiFi / Ethernet |
| 최대 연결 센서 | 100개 이상 |
| 웹 인터페이스 | 반응형 웹 |

---

## 11. 향후 발전 계획

### 11.1 단기 계획
- [ ] 모바일 앱 개발 (iOS/Android)
- [ ] 음성 알림 기능 추가
- [ ] 다국어 지원

### 11.2 중기 계획
- [ ] AI 기반 교체 시점 예측
- [ ] 클라우드 서비스 연동
- [ ] 다중 시설 통합 관리

### 11.3 장기 계획
- [ ] 의료 정보 시스템(EMR) 연동
- [ ] 추가 생체 신호 센서 통합
- [ ] 글로벌 시장 진출

---

## 12. 결론

### Smart Diaper Monitoring System은

```
✓ BLE Mesh 기술로 안정적인 다중 센서 네트워크 구축
✓ 실시간 모니터링으로 신속한 케어 제공
✓ 데이터 기반 체계적인 환자 관리
✓ 간병인 업무 효율화 및 환자 삶의 질 향상
```

**환자 중심의 스마트 헬스케어 솔루션입니다.**

---

## 문의

- **프로젝트 담당**:
- **이메일**:
- **연락처**:

---

*© 2024 Smart Diaper Monitoring System. All Rights Reserved.*
